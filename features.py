"""
–§–∏—á–∏ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞–ø–∏—Ö–Ω—É—Ç—å –≤ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã
"""

import os
import random
from collections import deque

import psycopg2

import config
import logger

log = logger.get_logger(__name__)


def get_memes() -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –∫ —Ä–∞–Ω–¥–æ–º–Ω–æ–º—É –º–µ–º–∞—Å—É –∏–∑ –∑–∞—Ä–∞–Ω–µ–µ –æ—Ç–æ–±—Ä–∞–Ω–Ω—ã—Ö, –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É, –µ—Å–ª–∏ –º–µ–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

    :return: –ø—É—Ç—å –∫ –ø–∏–∫—á–µ –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    """
    if os.path.exists('./memes'):
        memes = list(filter(lambda x: x.endswith('.jpg'), os.listdir('./memes')))
    else:
        log.warning("Directory with memes (expected ./memes/) wasn't found")
        return ''

    if os.path.exists('./logs/log_memes.txt'):
        with open('./logs/log_memes.txt', 'r') as f:
            [last_meme] = deque(f, maxlen=1) or ['']
    else:
        last_meme = 0

    while True:
        output = random.choice(memes)
        if output != last_meme:
            with open('./logs/log_memes.txt', 'w+') as f:
                f.write(output)
            break

    return os.path.join('./memes', output)


def get_username(link: str) -> str:
    if link.startswith('@'):
        return link
    if link.startswith('http') or link.startswith('t.me'):
        return f'@{link.split("/")[-1]}'
    return ''


def find_users(name: str):
    full_names = {'–õ–∞–Ω—Å–∫–∏—Ö –ê–Ω–Ω–∞ –í–∞–ª–µ—Ä—å–µ–≤–Ω–∞': 1038986109, '–õ–æ–ø–∞—Ç–∫–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≥–æ—Ä–µ–≤–∏—á': 830920118,
                  '–î—å—è—á–∫–æ–≤–∞ –ï–ª–µ–Ω–∞ –ú–∏—Ö–∞–π–ª–æ–≤–Ω–∞': 684785002, '–ë–æ—Ä–∑–µ–Ω–∫–æ–≤–∞ –ê–ª–∏–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 1814854497,
                  '–ë–æ–µ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞': 1298918427, '–ö–ª—é–µ–≤–∞ –ö—Å–µ–Ω–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞': 808864993,
                  '–°–º–æ–ª—å—è–Ω–∏–Ω–æ–≤–∞ –ü–æ–ª–∏–Ω–∞ –û–ª–µ–≥–æ–≤–Ω–∞': 421770409, '–°–∞—Ñ–∞—Ç–æ–≤–∞ –ò—Ä–∏–Ω–∞ –í–∏—Ç–∞–ª—å–µ–≤–Ω–∞': 1371458078,
                  '–ú–∞—Ä—Ç—ã–Ω–æ–≤–æ–π –ï–≤–≥–µ–Ω–∏–∏  –Æ—Ä—å–µ–≤–Ω—ã': 1167059277, '–ê–ª—Ñ—ë—Ä–æ–≤ –ì—Ä–∏–≥–æ—Ä–∏–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á': 713815827,
                  '–°—É–±–±–æ—Ç–∏–Ω–∞ –ò—Ä–∏–Ω–∞ –ë–æ—Ä–∏—Å–æ–≤–Ω–∞': 1180071373, '–ö–æ—Å—Ç–∏–Ω–∞ –ö–∞—Ä–∏–Ω–∞ –†–æ–º–∞–Ω–æ–≤–Ω–∞': 886155515,
                  '–ú–∞—Ç–≤–µ–µ–≤ –ú–∞–∫—Å–∏–º –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á': 1044869530, '–í–æ–¥–æ–ª–∞–¥ –î–º–∏—Ç—Ä–∏–π –í–ª–∞–¥–∏—Å–ª–∞–≤–æ–≤–∏—á': 1120695506,
                  '–®–∞—à–∫–æ–≤–∞ –î–∞—Ä—å—è –Æ—Ä—å–µ–≤–Ω–∞': 824548117, '–ö–∞–∑–∏–º–∏—Ä–∏–∫ –ê–Ω–Ω–∞ –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞': 744431052,
                  '–ü–æ–¥—à–∏–±—è–∫–∏–Ω–∞ –õ–æ–ª–∏—Ç–∞ –ù–∏–∫–æ–ª–∞–µ–≤–Ω–∞': 1636551595, '–õ—É–∫–∏–Ω–∞ –Ø–Ω–∞ –ï–≤–≥–µ–Ω—å–µ–≤–Ω–∞': 800957236,
                  '–ö–∞–º–±–∞—Ä–æ–≤–∞ –†–µ–Ω–∞—Ç–∞ –ù–∞–∏–ª—å–µ–≤–Ω–∞': 1652732836, '–ì–æ–Ω–µ–µ–≤ –ú–∏—Ö–∞–∏–ª –°–µ—Ä–≥–µ–µ–≤–∏—á': 1554349219,
                  '–ù–æ—Å–µ–≤–∏—á –ü–æ–ª–∏–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞': 735035167, '–í–æ–π—Ç–µ–Ω–∫–æ –í–ª–∞–¥–∏—Å–ª–∞–≤ –ê–Ω–¥—Ä–µ–µ–≤–∏—á': 895841296,
                  '–ü—å—è–Ω–∫–æ–≤–∞ –ü–æ–ª–∏–Ω–∞ –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞': 941543842, '–°–æ–ª–Ω—Ü–µ–≤–∞ –Ø—Ä–æ—Å–ª–∞–≤–ª–∞ –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞': 1511045033,
                  '–ê–≥–∏–±–∞–ª–æ–≤–∞ –ö—Ä–∏—Å—Ç–∏–Ω–∞ –°—Ç–∞–Ω–∏—Å–ª–∞–≤–æ–≤–Ω–∞': 992489503, '–°–∞—Å–∏–Ω–∞ –ê–ª–∏—Å–∞ –ò–≥–æ—Ä–µ–≤–Ω–∞': 1503877841,
                  '–ü–æ–ª—è–Ω—Å–∫–∞—è –î–∏–∞–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 827835673, '–ú–∞–∫–∞—Ä—å–µ–≤–∞ –ö–∞—Ä–∏–Ω–∞ –ê–ª–µ–∫—Å–µ–µ–≤–Ω–∞': 811742362,
                  '–ì—É–∫–æ–≤–∞ –í–∞–ª–µ—Ä–∏—è –í–∏–∫—Ç–æ—Ä–æ–≤–Ω–∞': 972919938, '–ö—É–∑—å–º–µ–Ω–∫–æ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞': 1007940091,
                  '–ì–∞–ª–∏—á –ö—Å–µ–Ω–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 670243686, '–°–µ–Ω–∏—á–∫–∏–Ω–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è  –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞': 1353175923,
                  '–¢–∞—Ä–∞–Ω–æ–≤–∞ –ê–ª–∏–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞': 970537793, '–ö–ª–∏–º–µ–Ω—Ç—å–µ–≤–∞ –ê–Ω–Ω–∞ –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞': 911640801,
                  '–¢–∞—Ä–∞—Å–æ–≤–∞ –ê–Ω–∞—Å—Ç–∞—Å–∏—è –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞': 750119071, '–ë–µ—Ä–¥—ã—à–µ–≤ –î–∞–Ω–∏–∏–ª –ò–≥–æ—Ä–µ–≤–∏—á': 1112547975,
                  '–°–∏–¥–æ—Ä–æ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ï–≤–≥–µ–Ω—å–µ–≤–Ω–∞': 1299812194, '–®–µ–≤–ª—è–∫–æ–≤–∞ –í–∞–ª–µ—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 1329049699,
                  '–ë–æ–µ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞': 1740178046, '–ë–∏—Ä—é–∫–æ–≤ –î–µ–Ω–∏—Å –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á': 625991372,
                  '–ú–∞–∫–∞—Ä–µ–≤–∏—á –ò—Ä–∏–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 1399973118, '–ï—Ñ—Ä–µ–º–æ–≤–∞ –ú–∞—Ä–∏—è –†–æ–º–∞–Ω–æ–≤–Ω–∞': 920248300,
                  '–ó–≤–µ—Ä–µ–≤–∞ –Æ–ª–∏—è –ï–≤–≥–µ–Ω—å–µ–≤–Ω–∞': 499606837, '–ß–∞—Å–æ–≤—Å–∫–∏—Ö –ò–≤–∞–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á': 175044465,
                  '–ë–∞—É–ª–∏–Ω–∞ –î–∞—Ä—å—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞': 1070984836, '–ë—Ä–∞–∂–Ω–∏–∫–æ–≤–∞ –ï–ª–µ–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞': 622051454,
                  '–ú–∞–ª—ã—Ö–∏–Ω–∞ –í–∞–ª–µ—Ä–∏—è –Æ—Ä—å–µ–≤–Ω–∞': 726058532, '–°–∞–∑–æ–Ω–æ–≤ –î–∞–Ω–∏–∏–ª –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á': 385056286}
    tg_names = {'~—Ç–≤–æ—è –º–µ—Ä–∑–æ—Å—Ç—å.': 1306294714, '–ê—Ä—Å–µ–Ω–∏–π': 912515292, '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ì—Ä–µ–±—ë–Ω–∫–∏–Ω–∞': 1202704228,
                '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞': 626301983, '–ö–∏—Ä–∏–ª–ª –ö—Ä—É–≥–ª–∏–∫–æ–≤': 418107034, 'kerauverk': 1242612463,
                'nikki vskrto': 1827430974, "G'ayrat": 763718623, '–ú–∞—Ä—É—Å—è –î–æ—â–µ—á–∫–∏–Ω–∞': 1028047493,
                'ü§çthevaleryü§ç': 984835432, 'Sasha': 750857380, 'barkosser': 859499774, 'üêøÔ∏è': 949449595,
                'Arisha Kopylova': 915293518, '–ú–∞—Ç–≤–µ–π –Ø–Ω–≥–æ–ª–µ–Ω–∫–æ': 604181224, 'Allergic to People': 1839290151,
                '–ê–Ω–Ω–∞ –õ–∞–Ω—Å–∫–∏—Ö': 1038986109, 'Aleksandr Lopatko': 830920118, 'Lena D': 684785002, '–ê–ª–∏–Ω–∞‚òÉÔ∏è': 1814854497,
                '–°–æ—Ñ—å—è –ü–æ—à—É–∫–∞–π–ª–æ': 1339387850, '–ö–∞—Ç—è –ë–æ–µ–≤–∞': 1298918427, '–ö—Å–µ–Ω–∏—è –ö–ª—é–µ–≤–∞': 808864993,
                '–ê–ø–æ–ª–ª–∏–Ω–∞—Ä–∏—è': 421770409, '–ò—Ä–∞': 1371458078, 'Evgeha': 1167059277, '–†–æ–º–∞–Ω –ö–æ–º–æ–≤': 476337160,
                'Rish': 925184312, '–≥—Ä–∏—à–∞ –∞–ª—Ñ—ë—Ä–æ–≤': 713815827, '–ù–∏–∫–æ—à–∫–∞': 1276954403, 'ullccceey': 966452026,
                'irasubbotina_': 1180071373, 'Karina': 886155515, '–ú–∞–∫—Å–∏–º': 1044869530, '–î–∏–º–∞': 1120695506,
                '–î–∞—à–∞': 824548117, '–ê–Ω—á–æ—É—Å ü•∏': 744431052, 'Lolita': 1636551595, '–ó—É–±–∫–æ–≤–∞ –ü–æ–ª–∏–Ω–∞': 1535110493,
                '–Ø–Ω–∞ –õ—É–∫–∏–Ω–∞': 800957236, '–†–µ–Ω–∞—Ç–∞': 1652732836, 'Huge Cat': 1554349219, '–∫—Å—é—à–∞ —Ö–ª–æ–ø–æ–≤–∞': 1866809913,
                'Polina Nosevich': 735035167, 'Voytenko': 895841296, 'Pyankova Polina': 941543842,
                '—Å–ª–∞–≤–∞ü§ô': 1511045033, 'Kristina ‚Ä¢‚Ä¢‚Ä¢': 992489503, '–ê–ª–∏—Å–∞': 1503877841, 'Matias': 746600084,
                '–Æ–ª—è –ê—Ä–±—É–∑–æ–≤–∞': 1319044289, '–î–∏–∞–Ω–∞ –ü–æ–ª—è–Ω—Å–∫–∞—è': 827835673, 'gay': 1903810166, '–ö–∞—Ä–∏–Ω–∞': 811742362,
                '–í–∞–ª–µ—Ä–∏—è –ì—É–∫–æ–≤–∞': 972919938, 'Antonina': 524027591, '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ö—É–∑—å–º–µ–Ω–∫–æ ü§ç': 1007940091,
                'üïä': 670243686, '–ê–Ω–∞—Å—Ç–∞—Å–∏—è –°–µ–Ω–∏—á–∫–∏–Ω–∞': 1353175923, 'Katrine': 888661591,
                '–ö—Ä–∏—Å—Ç–∏–Ω–∞ makhoyni': 2128827002, 'Alina': 970537793, 'Peter Lagutin': 408444942,
                '‚òÑ Asmodeus üî±': 858518428, 'Anna Klimenteva': 911640801, 'Anastasia Millagher': 750119071,
                '–î–∞–Ω–∏–∏–ª –ë–µ—Ä–¥—ã—à–µ–≤': 1112547975, '–ö–∞—Ç—è –°–∏–¥–æ—Ä–æ–≤–∞': 1299812194, 'valerolll': 1329049699,
                'Svetlana': 293182379, '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ë–æ–µ–≤–∞': 1740178046, '–î–µ–Ω–∏—Å –ë–∏—Ä—é–∫–æ–≤': 625991372,
                'Rrincess Bich': 1399973118, '–ë–∏–∑': 1424975200, 'Phoenix‚Äôs': 597583721, '–ê—Ä—Å–µ–Ω–∏–π –ë–∏—Ä—é–∫–æ–≤': 324242509,
                '–∫–æ–≤–∞–ª—å—Å–∫–∞—è-–¥–µ—Ñ–æ–ª—Ç–æ–≤–∞': 575120780, 's o s': 608316796, '–∞–Ω–Ω–∞ —Å–µ–º—ã–∫–∏–Ω–∞': 1832602820,
                '·Øì ùë´ùë™ | 7ùó¢ùóóùóî‚úπ ‚Éù‚Éôüá≤üáΩ': 1711263832, '–º–∞—Ä–∏—è—Ä': 920248300, '–¥–∞—à–∞ –ø—Ä–æ': 1037353382,
                'Ylik Zverüñá': 499606837, 'Ioann Chas': 175044465, 'Usman Mughal': 407274643,
                'Vladislav Kozub': 424185494, '–ú–∏—Ö–∞–∏–ª –õ–æ–±—ã–Ω—Ü–µ–≤': 1125531055, 'Darya Sergeevna': 1070984836,
                'ùí¶‚Ñ¥ùìâ ‚Ñ≥ùí∂ùìâùìá‚Ñ¥ùìàùìÄùíæùìÉüò°„ÉÑ‚úò': 843464775, 'NVSPC ADMIN': 1854799789, 'Baxora': 913289451,
                'M.M.M': 500861553, 'Stepan Ikonnikov': 422419401, '.': 439481645, '–ê–ª–µ–Ω–∫–∞ –¢–æ–∫—Å–∏–∫': 622051454,
                'leramalyy': 726058532, '–ö–∏—Ä–∞': 1399417506, 'Dan Sazonov': 385056286}
    usernames = {'Ebanashk': 1306294714, 'aabuldakova': 626301983, 'kirkruglikov': 418107034,
                 'Shhiiiiiiiiitttt': 1242612463, 'qurbonov_gayrat': 763718623, 'shittt2': 1028047493,
                 'thevalllery': 984835432, 'sandra1089': 750857380, 'barkosser': 859499774, 'tylox01': 949449595,
                 'arishkaw': 915293518, 'allewgictopeople': 1839290151, 'alexselfish46': 830920118,
                 'mathfightsyandexru': 1339387850, 'kseniaklyueva': 808864993, 'aloapollinaria': 421770409,
                 'Not_puppy': 1371458078, 'rishbaranova': 925184312, 'katiamish': 966452026, 'tikitopersha': 744431052,
                 'polina_egf23': 1535110493, 'yanchous_lu': 800957236, 'Huge_Cat_exe': 1554349219, 'vo1ten': 895841296,
                 'ppyankova8': 941543842, 'voruvv1': 1511045033, 'Totehemolo': 746600084, 'diasha_mn': 827835673,
                 'karinamkr': 811742362, 'Lerochekcheese': 972919938, 'sssshhhhhiiiiiiittttt': 524027591,
                 'me_kuzmenko': 1007940091, 'kkseni_ks': 670243686, 'Anastasitit': 1353175923, 'Avi_katriin': 888661591,
                 'peterlagutin': 408444942, 'so_golden_28': 858518428, 'millagher': 750119071,
                 'DadyaDaniil': 1112547975, 'kAtyAAAaas': 1299812194, 'Svetlya4_ok': 293182379,
                 'Azizbek_Shavkatovich': 1424975200, 'olgoritms': 597583721, 'arseniy_biryukov': 324242509,
                 'u_kovaldefolt': 575120780, 'iammjulia': 608316796, 'STTT_4': 1711263832, 'lookwhatshed1d': 1037353382,
                 'Corzm13_18': 499606837, 'Van_che': 175044465, 'usmanmughal': 407274643, 'vykozub': 424185494,
                 'helloiameurofan': 1125531055, 'mishkaSao': 843464775, 'nvspc_admin': 1854799789,
                 'baxor1989': 913289451, 'vokinoki': 422419401, 'hdddkarina': 439481645, 'Alenkabrazhka': 622051454,
                 'leramalyy': 726058532, 'Kira_0014': 1399417506, 'dan_sazonov': 385056286}


find_users('')
